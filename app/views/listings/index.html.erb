<div class="jumbotron text-center mt-5 bg-default">
    <div class="container">
    <% if user_signed_in? %>
      <h1 class="font-weight-bold">Welcome, <%= current_user.preferred_name ? current_user.preferred_name : "Friend" %> </h1>
      <p>As a teacher, in the Queensland Curriculum, I want to be able to access differentiated content for a variety of subjects in the secondary education system, so that the teacher workload is alleviated and higher order content is delivered across the state.</p>
      <p><%= link_to 'Create New Listing', new_listing_path, class: "btn btn-success", role: "button" %></p>
    <% else %>
      <h1>Ready to signup?</h1>
      <p>As a teacher, in the Queensland Curriculum, I want to be able to access differentiated content for a variety of subjects in the secondary education system, so that the teacher workload is alleviated and higher order content is delivered across the state.</p>
      <p><%= link_to 'Register Today', new_user_registration_path, class: "btn btn-success", role: "button" %></p>
    <% end %>
  </div>
</div>

<%= form_tag listings_path, :method => 'get' do %>
  <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "Search" %>
<% end %>

<%= link_to "Advanced Search", new_search_path %>

<div class="row">
  <% @listings.each do |listing| %>
  <div class="col-md-4">
      <div class="card mb-4 shadow-sm">
        <% if listing.image.attached? %>
            <%= cl_image_tag(listing.image.key, options = {class: 'img-fluid'}) %>
        <% end %>
        <div class="card-body">
          <h5 class="card-title"><%= listing.title %></h5>
          <p class="card-text"><%= listing.description %></p>
          <div class="d-flex align-items-center justify-content-between">
            <%= link_to 'View Listing', listing, class: "btn btn-success" %>
            <p class="lead m-0"><%= number_to_currency(listing.price) %></p>
          </div>
        </div>
      </div>
  </div>
  <% end %>
</div>

<%= will_paginate @listings, renderer: BootstrapPagination::Rails, inner_window: 1, outer_window: 0 %>
